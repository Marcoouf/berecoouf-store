@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base */
:root { --radius: 20px; }
html, body { background: white; color: #0a0a0a; }

/* Grain léger (très subtil, désactivable) */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: .035;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' /></svg>");
  background-size: 200px 200px;
}
/* Cacher le curseur partout sauf sur la page admin */
body:not(.admin-page) {
  cursor: none !important;
}

/* Forcer la disparition aussi sur les éléments cliquables, sauf sur la page admin */
body:not(.admin-page) a,
button,
[role="button"],
label,
input,
select,
textarea,
summary,
[tabindex]:not([tabindex="-1"]) {
  cursor: none !important;
}

/* Optionnel : si tu veux garder le curseur "texte" 
   quand on clique dans un champ de saisie */
input[type="text"], input[type="email"], input[type="search"],
input[type="password"], textarea {
  cursor: text !important;
}

/* === Components maison (utilise @apply) === */
@layer components {
  /* Liens avec soulignement animé */
  .link-underline {
    position: relative;
  }
  .link-underline::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -2px;
    height: 2px;
    width: 100%;
    background: theme('colors.accent.300');
    transform-origin: left center;
    transform: scaleX(0);
    transition: transform .25s ease;
  }
  .link-underline:hover::after,
  .link-underline:focus-visible::after {
    transform: scaleX(1);
  }

  /* Boutons primaires cohérents */
  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium
           transition focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-400
           disabled:opacity-60 disabled:pointer-events-none;
  }
  .btn-primary {
    @apply btn bg-accent-300 text-ink hover:bg-accent-400 active:scale-[.98] shadow-sm;
  }
  .btn-outline {
    @apply btn border border-accent-300 text-accent-700 hover:bg-accent-100;
  }

  /* Cartes : hover subtil */
  .card {
    @apply rounded-2xl border bg-white transition;
  }
  .card-hover {
    @apply hover:shadow-[0_12px_30px_rgba(0,0,0,0.08)] hover:ring-1 hover:ring-accent-200;
  }
}

/* === Rythme vertical simple === */
:root {
  --lead-tight: 1.1;
  --lead-normal: 1.35;
}
h1 { line-height: var(--lead-tight); }
h2, h3 { line-height: var(--lead-tight); }
p, li { line-height: var(--lead-normal); }

.tabular-nums { font-variant-numeric: tabular-nums; }

/* === Admin: rétablir un curseur normal ===
   Quand <body> possède la classe "admin-page", on annule les règles globales
   qui masquent le curseur (y compris sur les éléments cliquables). */
body.admin-page,
body.admin-page a,
body.admin-page button,
body.admin-page [role="button"],
body.admin-page label,
body.admin-page input,
body.admin-page select,
body.admin-page textarea,
body.admin-page summary,
body.admin-page [tabindex]:not([tabindex="-1"]) {
  cursor: auto !important;
}
/* Conserver le curseur de saisie dans les champs texte */
body.admin-page input[type="text"],
body.admin-page input[type="email"],
body.admin-page input[type="search"],
body.admin-page input[type="password"],
body.admin-page textarea {
  cursor: text !important;
}

body.admin-page .custom-cursor {
  display: none !important;
}

body.admin-page [data-brand-dot]::before,
body.admin-page .brand-dot,
body.admin-page .site-brand::before {
  display: none !important;
  content: none !important;
}
/* === Custom cursor — styles === */
/* Visible partout sauf admin (déjà masqué via .admin-page ci-dessus) */
.custom-cursor {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9999;
  pointer-events: none; /* ne bloque jamais les clics */
  transform: translate(-50%, -50%);
  will-change: transform, opacity;
  transition: opacity .2s ease;
}

/* Dot (centre) */
.custom-cursor__dot {
  width: 10px;
  height: 10px;
  border-radius: 9999px;
  background: theme('colors.accent.300'); /* accent logo color */
  opacity: .9;
}

/* Ring (contour) */
.custom-cursor__ring {
  width: 28px;
  height: 28px;
  border-radius: 9999px;
  border: 1.5px solid theme('colors.accent.400'); /* accent ring */
  box-shadow: 0 0 0 2px theme('colors.accent.200' / 0.08);
  transform: translate(-10px, -10px);
  backdrop-filter: blur(2px);
}

/* États utilitaires que ton composant peut ajouter */
.custom-cursor.is-hidden { opacity: 0; }
.custom-cursor.is-clicking .custom-cursor__ring { transform: translate(-12px, -12px) scale(0.9); }
.custom-cursor.is-link .custom-cursor__ring { border-color: rgb(16 185 129 / 0.95); box-shadow: 0 0 0 3px rgb(16 185 129 / 0.10); }
.custom-cursor.is-busy .custom-cursor__dot { opacity: 0.4; }

/* Accessibilité : réduire les animations si "prefers-reduced-motion" */
@media (prefers-reduced-motion: reduce) {
  .custom-cursor { transition: none; }
  .custom-cursor__ring { transition: none; }
}